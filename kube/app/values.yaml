global:
  name: stmgr
  namespace: media

image:
  repository: harbor.rwiv.xyz/private/stmgr
  tag: 0.6.2
  pullSecret: image-pull-secret

affinity: ~
tolerations: ~
podLabels:
  sidecar.istio.io/inject: "true"

service:
  type: NodePort
  port: 80
  nodePort: 30220

app:
  server:
    port: 8080
  redis:
    host: redis-master.infra.svc.cluster.local
    port: 6379
    secretName: redis-main
    passwordKey: password
  rabbitmq:
    host: rabbitmq.infra.svc.cluster.local
    port: 5672
    httpPort: 15672
    username: admin
    secretName: rabbitmq-main
    passwordKey: password
  postgres:
    host: stmgr-postgres-rw.media.svc.cluster.local
    port: 5432
    database: stmgr
    secretName: stmgr-postgres
    usernameKey: username
    passwordKey: password
  configs:
    nodeFailureThreshold: 10
    nodeResetCycleSec: 21600
    liveRecoveryWaitTimeMs: 40000
    chzzkRecoveryExtraWaitTimeMs: 0
    soopRecoveryExtraWaitTimeMs: 120000

externals:
  streamq:
    url: http://streamq.media.svc.cluster.local
    qsize: 100
  authed:
    url: http://authed.common.svc.cluster.local
    secretName: authed-app
    apiKeyKey: api-key
  untf:
    endpoint: http://untf.common.svc.cluster.local
    secretName: untf-client
    apiKeySecretKey: api-key
    topic: stmgr
